{
    "name": "openedge-abl-lsp",
    "publisher": "RiversideSoftware",
    "version": "1.4.21",
    "description": "OpenEdge ABL support for VS Code",
    "displayName": "OpenEdge ABL",
    "author": "chriscamicas",
    "license": "MIT",
    "capabilities": {
        "untrustedWorkspaces": {
            "supported": false
        }
    },
    "repository": {
        "type": "git",
        "url": "https://github.com/vscode-abl/vscode-abl.git"
    },
    "bugs": {
        "url": "https://github.com/vscode-abl/vscode-abl/issues"
    },
    "scripts": {
        "vscode:prepublish": "npm run package",
        "webpack": "webpack --mode development",
        "webpack-dev": "webpack --mode development --watch",
        "package": "webpack --mode production --devtool hidden-source-map",
        "pretest": "npm run compile",
        "test": "mocha -u tdd ./out/test",
        "lint": "eslint . --ext .js,.jsx,.ts,.tsx"
    },
    "icon": "resources/images/progress_icon.png",
    "engines": {
        "vscode": "^1.52.0"
    },
    "categories": [
        "Programming Languages",
        "Snippets",
        "Debuggers",
        "Formatters"
    ],
    "activationEvents": [
        "onLanguage:abl",
        "workspaceContains:openedge-project.json",
        "onTerminalProfile:proenv.terminal-profile"
    ],
    "main": "./dist/extension.js",
    "contributes": {
        "configurationDefaults": {
            "[abl]": {
                "editor.wordSeparators": "`~!@#$%^&()=+[{}]\\|;:'\",.<>/?"
            } 
        },
        "terminal": {
            "profiles": [
                {
                    "title": "Proenv",
                    "id": "proenv.terminal-profile"
                }
            ]
        },
        "languages": [
            {
                "id": "abl",
                "aliases": [
                    "OpenEdge ABL",
                    "abl",
                    "Progress",
                    "Progress 4GL"
                ],
                "extensions": [
                    ".w",
                    ".p",
                    ".i",
                    ".cls"
                ],
                "configuration": "./resources/language-configuration.json"
            }
        ],
        "grammars": [
            {
                "language": "abl",
                "scopeName": "source.abl",
                "path": "./resources/abl.tmLanguage.json"
            }
        ],
        "snippets": [
            {
                "language": "abl",
                "path": "./resources/abl.json"
            }
        ],
        "commands": [
            {
                "command": "abl.debugListingLine",
                "title": "ABL: Find debug listing line",
                "description": "Find debug listing line"
            },
            {
                "command": "abl.openInAB",
                "title": "ABL: Open file in AppBuilder",
                "description": "Open current file in AppBuilder"
            },
            {
                "command": "abl.runProgres.currentFile",
                "title": "ABL: Run with _progres",
                "description": "Run current file in TTY session"
            },
            {
                "command": "abl.runBatch.currentFile",
                "title": "ABL: Run with _progres -b",
                "description": "Run current file in batch session"
            },
            {
                "command": "abl.runProwin.currentFile",
                "title": "ABL: Run with prowin",
                "description": "Run current file in GUI session"
            },
            {
                "command": "abl.test",
                "title": "ABL: Test",
                "description": "Run all UnitTest"
            },
            {
                "command": "abl.test.currentFile",
                "title": "ABL: Test current file",
                "description": "Run current UnitTest file"
            },
            {
                "command": "abl.dataDictionary",
                "title": "ABL: Open DataDictionary",
                "description": "Open the DataDictionary external tool"
            },
            {
                "command": "abl.restart.langserv",
                "title": "ABL: Restart Language Server",
                "description": "Restart ABL Language Server"
            },
            {
                "command": "abl.change.buildMode",
                "title": "ABL: Change build mode",
                "description": "Change ABL Build Mode"
            },
            {
                "command": "abl.project.rebuild",
                "title": "ABL: Rebuild Project",
                "description": "Rebuild Project"
            },
            {
                "command": "abl.project.switch.profile",
                "title": "ABL: Switch project to profile",
                "description": "Switch project profile"
            },
            {
                "command": "abl.preprocess",
                "title": "ABL: Preprocess current file",
                "description": "Preprocess current file"
            },
            {
                "command": "abl.generateDebugListing",
                "title": "ABL: Generate debug listing",
                "description": "Generate debug listing of current file"
            },
            {
                "command": "abl.generateXref",
                "title": "ABL: Generate XREF",
                "description": "Generate XREF of current file"
            },
            {
                "command": "abl.generateXmlXref",
                "title": "ABL: Generate XML-XREF",
                "description": "Generate XML-XREF of current file"
            },
            {
                "command": "abl.catalog",
                "title": "ABL: Generate Assembly Catalog",
                "description": "Generate Assembly Catalog"
            },
            {
                "command": "abl.fixUpperCasing",
                "title": "ABL: Convert to uppercase",
                "description": "Convert keywords to uppercase"
            },
            {
                "command": "abl.fixLowerCasing",
                "title": "ABL: Convert to lowercase",
                "description": "Convert keywords to lowercase"
            },
            {
                "command": "abl.dumpLangServStatus",
                "title": "ABL: Dump Language Server status",
                "description": "Dump Language Server status"
            }
        ],
        "breakpoints": [
            {
                "language": "abl"
            }
        ],
        "debuggers": [
            {
                "type": "abl",
                "languages": [
                    "abl"
                ],
                "label": "ABL",
                "configurationSnippets": [
                    {
                        "label": "ABL: Attach to AVM",
                        "description": "Attach to AVM",
                        "body": {
                            "name": "${2:Attach to process}",
                            "type": "abl",
                            "request": "attach",
                            "hostname": "Host name or IP address of process to be debugged",
                            "mode": "legacy",
                            "port": 3099,
                            "localRoot": "^\"\\${workspaceFolder}\"",
                            "remoteRoot": "path to remote files",
                            "sourceMap": {
                                "Z:\\\\path\\\\to\\\\remote\\\\files\\\\**": "c:\\\\path\\\\to\\\\local\\\\src\\\\**"
                            }
                        }
                    },
                    {
                        "label": "ABL: Attach to PASOE",
                        "description": "Attach to PASOE session",
                        "body": {
                            "name": "${2:Attach to process}",
                            "type": "abl",
                            "request": "attach",
                            "url": "Base URL of PASOE instance",
                            "mode": "pasoe",
                            "localRoot": "^\"\\${workspaceFolder}\"",
                            "remoteRoot": "path to remote files",
                            "sourceMap": {
                                "Z:\\\\path\\\\to\\\\remote\\\\files\\\\**": "c:\\\\path\\\\to\\\\local\\\\src\\\\**"
                            }
                        }
                    },
                    {
                        "label": "ABL: Debug program / Interactive GUI",
                        "description": "Debug the current file in interactive GUI mode",
                        "body": {
                            "name": "${2:Debug program / Interactive GUI}",
                            "type": "abl",
                            "request": "launch",
                            "program": "^\"${1:\\${file}}\"",
                            "cwd": "^\"\\${workspaceFolder}\"",
                            "graphicalMode": true
                        }
                    },
                    {
                        "label": "ABL: Debug program / Interactive TTY",
                        "description": "Debug the current file in interactive TTY mode",
                        "body": {
                            "name": "${2:Debug program / Interactive TTY}",
                            "type": "abl",
                            "request": "launch",
                            "program": "^\"${1:\\${file}}\"",
                            "cwd": "^\"\\${workspaceFolder}\"",
                            "graphicalMode": false
                        }
                    }
                ],
                "configurationAttributes": {
                    "launch": {
                        "required": [
                            "program"
                        ],
                        "properties": {
                            "stopOnEntry": {
                                "type": "boolean",
                                "description": "Automatically stop the program at the first line executed",
                                "default": false
                            },
                            "program": {
                                "type": "string",
                                "description": "The program to start.",
                                "default": "${file}"
                            },
                            "cwd": {
                                "type": "string",
                                "description": "The working directory.",
                                "default": "${workspaceFolder}"
                            },
                            "sourceMap": {
                                "type": "object",
                                "description": "source mapping for remote debugging",
                                "default": {
                                    "Z:\\path\\to\\remote\\files\\**": "c:\\path\\to\\local\\src\\**"
                                }
                            },
                            "graphicalMode": {
                                "type": "boolean",
                                "description": "Start session with _progres or prowin",
                                "default": "false"
                            }
                        }
                    },
                    "attach": {
                        "required": [
                            "mode"
                        ],
                        "properties": {
                            "mode": {
                                "type": "string",
                                "description": "Attach to AVM or PASOE"
                            },
                            "port": {
                                "type": "integer",
                                "description": "The port that the debugger is listening on",
                                "default": 3099
                            },
                            "hostname": {
                                "type": "string",
                                "description": "The hostname the debugger is listening on",
                                "default": "127.0.0.1"
                            },
                            "localRoot": {
                                "type": "string",
                                "description": "The root directory for local source",
                                "default": "${workspaceFolder}"
                            },
                            "remoteRoot": {
                                "type": "string",
                                "description": "The root directory for remote source",
                                "default": ""
                            },
                            "sourceMap": {
                                "type": "object",
                                "description": "source mapping for remote debugging",
                                "default": {
                                    "Z:\\path\\to\\remote\\files\\**": "c:\\path\\to\\local\\src\\**"
                                }
                            }
                        }
                    }
                }
            }
        ],
        "configuration": {
            "type": "object",
            "title": "ABL configuration",
            "properties": {
                "abl.buildMode": {
                    "type": "integer",
                    "default": 1,
                    "description": "Build mode",
                    "enum": [
                        1,
                        2,
                        3,
                        4
                    ],
                    "enumItemLabels": [
                        "Build everything",
                        "Classes only",
                        "Modified files only",
                        "No build"
                    ],
                    "enumDescriptions": [
                        "Scan all source code at startup, build if not up to date, and build when any source changed",
                        "Scan all source code at startup, build only classes if not up to date, and build when any source changed",
                        "Scan all source code at startup, don't rebuild anything, build only when any source changed",
                        "Scan all source code at startup, never build anything"
                    ]
                },
                "abl.outline.showIncludeFiles": {
                    "type": "boolean",
                    "default": false,
                    "description": "When enabled outline shows list of include files"
                },
                "abl.outline.showContentInIncludeFiles": {
                    "type": "boolean",
                    "default": false,
                    "description": "When enabled outline shows objects declared in include files"
                },
                "abl.completion.upperCase": {
                    "type": "boolean",
                    "default": false,
                    "description": "Use uppercase or lowercase keywords in code completion"
                },
                "abl.useProcedureEditorKeyBindings": {
                    "type": "boolean",
                    "default": true,
                    "description": "If true, use the same shortcuts as the Progress Procedure Editor (F2, Shift+F2, ...)"
                },
                "abl.langServerDebug": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable language server debug logging"
                },
                "abl.langServerTrace": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable language server trace logging (in $TMP/vscode-language-server-trace.txt)"
                },
                "abl.langServerExtraJavaArgs": {
                    "type": "string",
                    "default": "",
                    "description": "Extra arguments on the Language Server command line"
                },
                "abl.debugAdapterExtraJavaArgs": {
                    "type": "string",
                    "default": "",
                    "description": "Extra arguments on the Debug Adapter command line"
                },
                "abl.debugAdapterDebug": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable debug adapter debug logging (in $TMP/vscode-debug-adapter.txt)"
                },
                "abl.debugAdapterTrace": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable debug adapter trace logging (in $TMP/vscode-debug-adapter-trace.txt)"
                },
                "abl.cablLicense": {
                    "type": "string",
                    "default": "",
                    "description": "CABL Rules License"
                },
                "abl.langServerJavaExecutable": {
                    "type": "string",
                    "default": "java",
                    "description": "Language Server Java executable"
                },
                "abl.configuration.maxThreads": {
                    "type": "integer",
                    "default": -1,
                    "description": "Maximum number of AVM per OpenEdge project (-1 means no limit)"
                },
                "abl.configuration.hideAvmWindow": {
                    "type": "boolean",
                    "default": false,
                    "description": "Hide AVM windows in taskbar (only if graphicalMode set to true)"
                },
                "abl.configuration.runtimes": {
                    "type": "array",
                    "description": "Map OpenEdge Execution Environments to local installation",
                    "items": {
                        "type": "object",
                        "default": {},
                        "required": [
                            "path",
                            "name"
                        ],
                        "properties": {
                            "name": {
                                "type": "string",
                                "enum": [
                                    "9.1E",
                                    "10.2B",
                                    "11.5",
                                    "11.6",
                                    "11.7",
                                    "12.2",
                                    "12.4",
                                    "12.5",
                                    "12.6",
                                    "12.7",
                                    "ESAP"
                                ],
                                "description": "OpenEdge Execution Environment name. Must be unique."
                            },
                            "path": {
                                "type": "string",
                                "pattern": ".*(?<!\\/bin|\\/bin\\/|\\\\bin|\\\\bin\\\\)$",
                                "description": "OpenEdge home directory.\n On Windows, backslashes must be escaped, i.e.\n\"path\":\"C:\\\\Progress\\\\OpenEdge-12.2\"."
                            },
                            "default": {
                                "type": "boolean",
                                "description": "Is default runtime? Only one runtime can be default."
                            }
                        },
                        "additionalProperties": false
                    },
                    "default": [],
                    "scope": "machine"
                }
            }
        },
        "menus": {
            "commandPalette": [
                {
                    "command": "abl.runProgres.currentFile",
                    "when": "editorLangId == 'abl'"
                },
                {
                    "command": "abl.test",
                    "when": "editorLangId == 'abl'"
                },
                {
                    "command": "abl.test.currentFile",
                    "when": "editorLangId == 'abl'"
                }
            ]
        },
        "jsonValidation": [
            {
                "fileMatch": "openedge-project.json",
                "url": "./resources/openedge.schema.json"
            }
        ],
        "keybindings": [
            {
                "when": "editorTextFocus && config.abl.useProcedureEditorKeyBindings && resourceLangId == abl",
                "command": "abl.runBatch.currentFile",
                "key": "F2"
            },
            {
                "when": "editorTextFocus && config.abl.useProcedureEditorKeyBindings && resourceLangId == abl",
                "command": "abl.openInAB",
                "key": "shift+f8"
            },
            {
                "when": "editorTextFocus && config.abl.useProcedureEditorKeyBindings && resourceLangId == abl",
                "command": "abl.debugListingLine",
                "key": "alt+L"
            }
        ]
    },
    "dependencies": {
        "@vscode/debugadapter": "^1.51.1",
        "@vscode/debugprotocol": "^1.51.0",
        "abl-tmlanguage": "github:Riverside-Software/abl-tmlanguage",
        "glob": "^7.1.6",
        "jsonminify": "^0.4.1",
        "minimatch": "^3.0.4",
        "rimraf": "^3.0.1",
        "util.promisify": "^1.0.1",
        "vsce": "^2.6.7",
        "vscode-languageclient": "^7.0.0",
        "xml2js": "^0.4.23"
    },
    "devDependencies": {
        "@types/glob": "^7.1.1",
        "@types/mocha": "^9.0.0",
        "@types/node": "^13.7.0",
        "@types/vscode": "^1.52.0",
        "@typescript-eslint/eslint-plugin": "^5.10.0",
        "@typescript-eslint/parser": "^5.10.0",
        "eslint": "^8.7.0",
        "mocha": "^9.1.3",
        "ts-loader": "^9.2.6",
        "typescript": "^3.7.5",
        "vscode-test": "^1.3.0",
        "webpack": "^5.69.1",
        "webpack-cli": "^4.9.2"
    }
}
